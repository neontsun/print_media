"use strict";var windowSize=$(window).width(),mobile=320,mobileLarge=414,mobileLarge2=721,tabletSmall=700,tablet=1024,desktop=1239,desktopLarge=1880,menu={selectors:{navigation:".header__nav",info:".header__info",burgerMenuContainer:".header__burger-container",searchForm:".header__search",callbackButton:".header__callback-button"},reduce:function(){windowSize<1170&&$("[data-include]").each(function(){$(this).addClass("header__nav-item--included "),$(this).find("a").addClass("header__nav-link--included"),$(this).appendTo(".header__nav-list--included")}),windowSize<937&&$(this.selectors.navigation).appendTo(this.selectors.burgerMenuContainer),windowSize<625&&$(this.selectors.callbackButton).appendTo(this.selectors.burgerMenuContainer)},init:function(){this.reduce()}},dropDownMenu={selectors:{navItemHasIncluded:".header__nav-item--has-included"},stateClasses:{visible:"is-active"},showEvent:function(){var t=this;$(this.selectors.navItemHasIncluded).on("click",function(e){$(t.selectors.navItemHasIncluded).toggleClass(t.stateClasses.visible)})},hideEvent:function(){var t=this;$(document).on("click",function(e){desktop<=windowSize&&0===$(e.target).closest(t.selectors.navItemHasIncluded).length&&($(t.selectors.navItemHasIncluded).removeClass(t.stateClasses.visible),e.stopPropagation())})},init:function(){this.showEvent(),this.hideEvent()}},menuSearch={selectors:{container:".header",navigation:".header__nav",searchForm:".header__search",searchField:".header__search-field-wrapper",searchButton:".header__search-button",searchClose:".header__search-close"},stateClasses:{visible:"is-active"},showEvent:function(){var t=this;$(this.selectors.searchButton).on("click",function(e){if(windowSize<1562){if($(t.selectors.container).hasClass(t.stateClasses.visible))return;e.preventDefault(),936<windowSize&&$(t.selectors.navigation).fadeOut("fast"),$(t.selectors.container).addClass(t.stateClasses.visible),$(t.selectors.searchForm).removeClass("search-slide-out").addClass("search-slide-in")}})},hideEvent:function(){var t=this;$(this.selectors.searchClose).on("click",function(e){windowSize<1562&&($(t.selectors.searchForm).removeClass("search-slide-in").addClass("search-slide-out"),$(t.selectors.container).removeClass(t.stateClasses.visible),936<windowSize&&$(t.selectors.navigation).fadeIn("fast"))})},init:function(){this.showEvent(),this.hideEvent()}},mobileMenu={selectors:{burger:".header__burger",burgerMenu:".header__burger-menu",burgerMenuContainer:".header__burger-container"},stateClasses:{toggleVisible:"is-active"},toggleShowEvent:function(){var t=this;$(this.selectors.burger).on("click",function(e){windowSize<desktop&&($(t.selectors.burger).toggleClass("is-cross"),$(t.selectors.burgerMenu).toggleClass(t.stateClasses.toggleVisible))})},init:function(){this.toggleShowEvent()}},callback={selectors:{callbackButtons:"[data-popup-selector]",callbackPopup:".callback-popup",callbackPopupBody:".callback-popup__body",callbackPopupClose:".callback-popup__close"},stateClasses:{visible:"is-active"},showEvent:function(){$(this.selectors.callbackButtons).on("click",function(e){var t=$(this).attr("data-popup-selector");$(t).addClass(callback.stateClasses.visible)})},hideOnCrossEvent:function(){var t=this;$(this.selectors.callbackPopupClose).on("click",function(e){$(t.selectors.callbackPopup).removeClass(t.stateClasses.visible)})},hideOnEmptyClickEvent:function(){var t=this;$(this.selectors.callbackPopup).on("click",function(e){0===$(e.target).closest(t.selectors.callbackPopupBody).length&&($(t.selectors.callbackPopup).removeClass("is-active"),e.stopPropagation())})},init:function(){this.showEvent(),this.hideOnCrossEvent(),this.hideOnEmptyClickEvent()}},services={selectors:{serviceItem:'.catalog__service:not(".catalog__service--special")',serviceLink:".catalog__service-link",serviceLinkClass:"catalog__service-link",serviceCover:".catalog__service-cover",serviceLinkWrapperClass:"catalog__service-wrapper",subservicesLinkHovered:".catalog__service.hover .catalog__subservices-link",subservicesItems:".catalog__subservices-item",counterAllLinks:".counter-all-links"},stateClasses:{visible:"is-active"},hoverEvent:function(e){desktop<=windowSize&&$(e).hover(function(){$(e).not($(this)).css("opacity",.7)},function(){$(e).css("opacity",1)})},removeHoverClasses:function(e){windowSize<desktop&&$(e).removeClass("hover")},showSubservicesOnTablet:function(e,t){$(e).on("click",function(e){windowSize<1240&&625<=windowSize&&$(this).toggleClass(t)})},addLinkOnMob:function(e,t,s){$(e).wrap(function(){if(windowSize<625){var e=$(this).find(s).attr("href");return'<a href="'.concat(e,'" class="').concat(t,'"></a>')}})},changeServicesLinksEnding:function(e,t,s){var i=$(t).hasClass(services.selectors.serviceLinkClass);1!==s?1<s&&s<5?i?$(e).find(t).text("+ ".concat(s," услуги")):$(e).find(t).text("".concat(s," услуги")):i?$(e).find(t).text("+ ".concat(s," услуг")):$(e).find(t).text("".concat(s," услуг")):i?$(e).find(t).text("+ ".concat(s," услуга")):$(e).find(t).text("".concat(s," услуга"))},setSubservicesRestLinksValue:function(e,t,s,i){$(e).each(function(){var e=parseInt($(this).find(s).text())-parseInt($(this).find(t).length);e<1?$(this).find(i).hide():services.changeServicesLinksEnding($(this),i,e)})},setServicesLinksEnding:function(e,t){$(e).each(function(){var e=parseInt($(this).find(t).text());services.changeServicesLinksEnding($(this),t,e)})},init:function(){var e=services.selectors.serviceItem,t=services.selectors.serviceLink;this.hoverEvent(services.selectors.subservicesLinkHovered),this.removeHoverClasses(e),this.showSubservicesOnTablet(e,services.stateClasses.visible),this.setSubservicesRestLinksValue(e,services.selectors.subservicesItems,services.selectors.counterAllLinks,t),this.setServicesLinksEnding(e,services.selectors.counterAllLinks)}},buttonUp={select:".btn-start",showEvent:function(e){$(e).css("opacity",0),$(".body-wrap-scroll").scroll(function(){300<$(".body-wrap-scroll").scrollTop()?$(e).css("opacity",1):$(e).css("opacity",0)})},scrollEvent:function(e){$(e).on("click",function(){$(".body-wrap-scroll").animate({scrollTop:0},300)})},init:function(){this.showEvent(this.select),this.scrollEvent(this.select)}},sideMenu={selectors:{menuLinks:".sidemenu__link",catalogSections:".catalog__section",sections:".subservice-page__section, .about__section",catalogLinksClass:"catalog__sidemenu-link",subserviceLinkClass:"subservice-page__sidemenu-link"},data:{type:"data-sidemenu-page"},stateClasses:{visible:"is-active"},addSectionId:function(e){$(e).each(function(e){$(this).attr("id","section-".concat(e))})},addLinkPath:function(e){$(e).each(function(e){$(this).attr("href","#section-".concat(e))})},clickMenuLinkEvent:function(o,a,c){$(o.menuLinks).on("click",function(e){if(e.preventDefault(),$(this).hasClass(a.visible))return!1;var t=$(this).attr("href"),s=document.querySelector(t).offsetTop,i=$(this).closest("[".concat(c.type,"]")).attr(c.type),n=($("header").height(),625<=windowSize&&"catalog"==i?windowSize<1240?s-100:s+60:0);if(windowSize<625&&"catalog"==i)return!1;if(desktop<=windowSize)switch(i){case"about":n=s-60;break;case"service":n=s+60}else switch(i){case"about":n=s-120;break;case"service":n=s-100}$(o.menuLinks).removeClass(a.visible),$(this).toggleClass(a.visible),$(".body-wrap-scroll").animate({scrollTop:n},300)})},init:function(){this.addSectionId(this.selectors.catalogSections),this.addSectionId(this.selectors.sections),this.addLinkPath(this.selectors.menuLinks),this.clickMenuLinkEvent(this.selectors,this.stateClasses,this.data)}},catalog={selectors:{menuItem:".catalog__sidemenu-item",menuLink:".catalog__sidemenu-link",section:".catalog__section",sectionContainer:".catalog__subsidemenu"},stateClasses:{visible:"is-active"},createSectionsMenu:function(s,e){$(e).each(function(e){var t;windowSize<625&&(t=$(s)[e],$(this).appendTo(t))})},showSubmenuEvent:function(e,t){$(e).on("click",function(e){windowSize<625&&(e.preventDefault(),$(this).toggleClass(t))})},init:function(){this.createSectionsMenu(this.selectors.sectionContainer,this.selectors.section),this.showSubmenuEvent(this.selectors.menuLink,this.stateClasses.visible)}},forms={selectors:{radios:".primary-form__radio",checkbox:".primary-form__checkbox"},addLabelHref:function(e){$(e).each(function(e,t){var s="radio"===$(this).attr("type")?"radio":"checkbox";$(this).attr("id","".concat(s,"-").concat(e)),$(this).siblings("label").attr("for","".concat(s,"-").concat(e))})},init:function(){this.addLabelHref(this.selectors.radios),this.addLabelHref(this.selectors.checkbox)}},showFullDescription={selectors:{subserviceDescription:".descr-hidden",subserviceDescriptionBtn:".info-description__show-more-btn"},toggleEvent:function(e){$(e.subserviceDescriptionBtn).on("click",function(){$(e.subserviceDescription).slideToggle(300)})},init:function(){this.toggleEvent(this.selectors)}},checkoutOrderNumber={selectors:{fakeField:".number-f",fakeButton:".number-btn-f",field:".number-value",form:".number-form",orderInfoContainer:".checkout__order-info",paymentContainer:".checkout__payment-type",paymentInfoContainer:".checkout__payment-info"},stateClasses:{disabled:"disabled"},changeInputEvent:function(t,s){var i=$(t.fakeField).val();$(t.fakeField).on("input",function(){var e=$(this).val().trim();$(t.field).val(e),e!==i?($(t.orderInfoContainer).addClass(s.disabled),$(t.fakeButton).fadeIn(300)):($(t.orderInfoContainer).removeClass(s.disabled),$(t.fakeButton).fadeOut(300))})},submitFormEvent:function(e){$(e.fakeButton).on("click",function(){$(e.form).submit()})},init:function(){this.changeInputEvent(this.selectors,this.stateClasses),this.submitFormEvent(this.selectors)}},pagination={selectors:{paginationLinks:".pagination__page-number"},stateClassses:{active:"pagination__page-number--current"},clickEvent:function(t,s){$(t.paginationLinks).on("click",function(e){e.preventDefault(),$(this).siblings(t.paginationLinks).removeClass(s.active),$(this).addClass(s.active)})},init:function(){this.clickEvent(this.selectors,this.stateClassses)}},validation={selectors:{btn:".primary-form__button",inputs:"input",inputPhone:'input[type="tel"]',inputEmail:'input[type="email"]'},stateClasses:{invalid:"invalid"},changeFormEvent:function(e){var n=null,o=null;$(e.inputs).on("keyup",function(){var e=$(this).closest("form").find('input[type="submit"]'),t=$(this).closest("form").find('input[type="email"]').length,s=$(this).closest("form").find('input[type="tel"]').length,i=$(this).attr("type");"email"===i&&($(this).val().match(/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/)?($(this).prev("label").attr("style",""),$(this).attr("invalid",!1),t&&s?n=!0:e.attr("disabled",!1)):($(this).prev("label").css("color","#EB5757"),$(this).attr("invalid",!0),t&&s?n=!1:e.attr("disabled",!0))),"tel"===i&&($(this).val().length==="8 (999) 999-9999".length?($(this).prev("label").attr("style",""),$(this).attr("invalid",!1),t&&s?o=!0:e.attr("disabled",!1)):($(this).prev("label").css("color","#EB5757"),$(this).attr("invalid",!0),t&&s?o=!1:e.attr("disabled",!0))),t&&s&&(n&&o?e.attr("disabled",!1):e.attr("disabled",!0))})},init:function(){this.changeFormEvent(this.selectors)}},changeFooterGrid=function(){windowSize<desktop&&$(".footer__contacts, .footer__info, .footer__projects").unwrap()},createTableWrapper=function(){$("table").wrap('<div class="table-wrapper"></div>').addClass("table")},zoomImages=function(){$(".image-link").magnificPopup({type:"image",closeOnContentClick:!0,closeBtnInside:!1,mainClass:"mfp-no-margins mfp-with-zoom",image:{verticalFit:!0},zoom:{enabled:!0,duration:300}})},customScrollOptions={cursorcolor:"#00A6E8",background:"#EEEEEE",enabletranslate3d:!1,autohidemode:"leave",hidecursordelay:0},copyEmail=function(e){e.preventDefault(),console.log(123);var t=document.querySelector('[data-event="copyEmail"]'),s=document.createRange();s.selectNode(t),window.getSelection().addRange(s),document.execCommand("copy"),window.getSelection().removeAllRanges(),document.querySelector('[data-event="copyEmailTooltip"]').innerHTML="Cкопировано в буфер обмена"},resetEmailTooltip=function(){document.querySelector('[data-event="copyEmailTooltip"]').innerHTML="При нажатии будет скопировано в буфер обмена"};$(window).on("load",function(e){$("body").css("opacity",1)}),$("document").ready(function(){$('[data-event="copyEmail"]').on("click",function(e){copyEmail(e)}),$('[data-event="copyEmail"]').on("mouseout",resetEmailTooltip),$('input[type=tel], input[type="email"]').val(""),changeFooterGrid(),createTableWrapper(),zoomImages(),menu.init(),dropDownMenu.init(),menuSearch.init(),mobileMenu.init(),callback.init(),validation.init(),services.init(),buttonUp.init(),sideMenu.init(),catalog.init(),forms.init(),showFullDescription.init(),checkoutOrderNumber.init(),pagination.init(),$(".js-spoiler").on("click",function(){$(this).next().slideToggle()}),$('input[type="tel"]').mask("8 (999) 999-9999",{placeholder:""}),$(".projects__select").selectric({maxHeight:270,disableOnMobile:!1,nativeOnMobile:!1,onInit:function(){desktop<=windowSize&&$(".selectric-items").niceScroll(customScrollOptions)},onBeforeClose:function(){$(".selectric-items").getNiceScroll().hide()}}),desktop<=windowSize&&($(".js-scroll").niceScroll(".js-scroll-wrapper",{cursorcolor:"#00A6E8",background:"#EEEEEE",zindex:10}),$(document).on("scroll",function(){$(".js-scroll").getNiceScroll().resize()}));var e={name:".js-news-slider",next:".js-news-btn-next",prev:".js-news-btn-prev",scrollbar:".js-news-scrollbar"},t={name:".js-photo-slider",next:".js-photo-btn-next",prev:".js-photo-btn-prev",pagination:".js-photo-pagination"},s={name:".js-reviews-slider",next:".js-reviews-btn-next",prev:".js-reviews-btn-prev",scrollbar:".js-reviews-scrollbar"},i={name:".js-services-slider",next:".js-services-btn-next",prev:".js-services-btn-prev"},n={name:".js-photo-slider-thumbs"},o=(new Swiper(e.name,{spaceBetween:10,slidesPerView:"auto",breakpoints:{414:{spaceBetween:20},1025:{spaceBetween:28,slidesPerView:3,simulateTouch:!1},1880:{spaceBetween:40,slidesPerView:3}},navigation:{nextEl:e.next,prevEl:e.prev},scrollbar:{el:e.scrollbar},watchOverflow:!0}),new Swiper(t.name,{spaceBetween:10,slidesPerView:1,navigation:{nextEl:t.next,prevEl:t.prev},pagination:{el:t.pagination},watchOverflow:!0})),a=(new Swiper(s.name,{spaceBetween:10,slidesPerView:1,navigation:{nextEl:s.next,prevEl:s.prev},scrollbar:{el:s.scrollbar},simulateTouch:!1,watchOverflow:!0}),new Swiper(n.name,{width:100,spaceBetween:10,slidesPerView:"auto",watchOverflow:!0,slideToClickedSlide:!0}));desktop<=windowSize&&new Swiper(i.name,{spaceBetween:37,slidesPerGroup:3,slidesPerView:"auto",navigation:{nextEl:i.next,prevEl:i.prev},watchOverflow:!0}),0<$(n.name).length&&(console.log($(n.name).length),(o.controller.control=a).controller.control=o),0<$("#map").length&&ymaps.ready(function(){ymaps.templateLayoutFactory.createClass('<div style="color: #FFFFFF; font-weight: bold;">$[properties.iconContent]</div>');var e=new ymaps.Placemark([57.661456187498324,39.84196422883607],{},{iconLayout:"default#image",iconImageHref:"img/icons/map-point.png",iconImageSize:[36,36],iconImageOffset:[-25,0]});new ymaps.Map("map",{center:[57.661456187498324,39.84196422883607],zoom:17}).geoObjects.add(e)}),$(window).resize(function(){window.location.reload()}),$(".js-show-more").on("click",function(){var e=$(this).attr("data-text-button"),t=$(this).attr("data-text-button-active");$(this).siblings(".js-toggle-content").slideToggle(),$(this).toggleClass("active"),$(this).hasClass("active")?$(this).text(t):$(this).text(e)})});